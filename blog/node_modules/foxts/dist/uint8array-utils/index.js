"use strict";var e=require("../guard/index.js");const r=Uint8Array,t=ArrayBuffer,n=TextDecoder,o=new TextEncoder,u={utf8:new n("utf8")};exports.base64ToUint8Array=function(e){return r.from(atob(function(e){const r=e.replaceAll("-","+").replaceAll("_","/"),t=(4-r.length%4)%4;return r+"=".repeat(t)}(e)),e=>e.charCodeAt(0))},exports.concatUint8Arrays=function(e,t){if(0===e.length)return new r(0);const n=new r(t??=e.reduce((e,r)=>e+r.length,0));let o=0;for(let r=0,t=e.length;r<t;r++){const t=e[r];n.set(t,o),o+=t.length}return n},exports.stringToUint8Array=function(e){return o.encode(e)},exports.toUint8Array=function(n){return n instanceof t?new r(n):t.isView(n)?new r(n.buffer,n.byteOffset,n.byteLength):void e.never(n,"value must be ArrayBuffer or ArrayBufferView")},exports.uint8ArrayToBase64=function(e,r=!1){let t="";for(let r=0;r<e.length;r+=65535){const n=e.subarray(r,r+65535);t+=btoa(String.fromCharCode.apply(void 0,n))}return r?t.replaceAll("+","-").replaceAll("/","_").replace(/=+$/,""):t},exports.uint8ArrayToString=function(e,r="utf8"){return u[r]??=new n(r),u[r].decode(e)};